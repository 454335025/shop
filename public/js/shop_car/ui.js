/* Date: 2016-09-28T22:22:59Z Path: js/ui/ui.js */
!function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.upload=i.Jumei.ui.upload||n,i.define&&define("upload",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(){},n=function(i){this.options={id:"",uploadUrl:"/mobile/Identity/upload",beforeSend:e,success:e,error:e,complete:e,uploading:e,preview:e,maxconnections:1,method:"post",fieldname:"files"},this.queue=[],this.running=[],this.STATUS={QUEUED:"queued",ABORTED:"aborted",UPLOADING:"uploading",COMPLETED:"completed"},$.extend(this.options,i)};return n.prototype={doUpload:function(i){var t=this,e=new XMLHttpRequest,n=new FormData;i.xhr=e,this.options.beforeSend.call(this,i,e),e.onreadystatechange=function(){4===e.readyState&&t.onComplete(i,e)},e.upload.onprogress=function(i){var e=t.options.uploading,n=i.loaded,o=i.total,s=Math.floor(100*n/o);e instanceof Function&&e(s)},e.open(this.options.method,this.options.uploadUrl,!0),n.append(this.options.fieldname,i),e.send(n)},onComplete:function(i,t){i.status!==this.STATUS.ABORTED&&(i.status=this.STATUS.COMPLETED,200===t.status?this.options.success.call(this,i,t):this.options.error.call(this,i,t),this.options.complete.call(this,i,t)),i.xhr&&delete i.xhr;for(var e in this.running)if(this.running[e].name===i.name){this.running.splice(e,1);break}this.run()},add:function(i){this.queue.push(i);var t=this.getFileUrl(i);this.options.preview.call(this,t),this.run()},run:function(){if(this.queue.length>0&&this.running.length<this.options.maxconnections)for(var i=0;i<this.options.maxconnections-this.running.length;++i){var t=this.queue.shift();this.running.push(t),this.doUpload(t)}},start:function(){var i=this;$("#"+this.options.id).change(function(){var t="",e=this.files;if(this.files)for(var n=0;n<e.length;++n)t=e[n].name||e[n].fileName,t.toLowerCase().match("(jpg)|(png)|(jpeg)|(gif)$")?i.add(e[n]):alert("您输入的图片格式有问题")})},getFileUrl:function(t){var e;return e=navigator.userAgent.indexOf("MSIE")>=1?$("#"+this.options.id)[0].value:i.URL.createObjectURL(t)},setUploadUrl:function(i){this.options.uploadUrl=i}},n}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.weixinshare=i.Jumei.ui.weixinshare||n,i.define&&define("weixinshare",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=i.wx||{},n=function(i){this.options={checkJsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage"]},$.extend(this.options,i),this.init()};return n.prototype={init:function(){var i=this;e.ready(function(){e.checkJsApi({jsApiList:i.options.checkJsApiList,success:function(i){}})})},initConfigFunc:function(i,t,n,o,s,a){e.config({debug:a?a:!1,appId:i,timestamp:t,nonceStr:n,signature:o,jsApiList:s})},bindShareFriendFunc:function(i,t,n,o,s,a,r){e.onMenuShareAppMessage({title:i,desc:t,link:n,imgUrl:o,trigger:function(i){},cancel:function(i){s&&s()},success:function(i){a&&a()},fail:function(i){r&&r()}})},bindShareCircleFunc:function(i,t,n,o,s,a){e.onMenuShareTimeline({title:i,link:t,imgUrl:n,trigger:function(i){},cancel:function(i){o&&o()},success:function(i){s&&s()},fail:function(i){a&&a()}})}},n}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.slider=i.Jumei.ui.slider||n,i.define&&define("share",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={sinaBtnBg:"http://images.jumei.com/mobile/act/image/widget/share/weibo-btn.png",weichatBtnBg:"http://images.jumei.com/mobile/act/image/widget/share/wechat-btn.png",weiFriendBtnBg:"http://images.jumei.com/mobile/act/image/widget/share/weixin_friend.png",sinaLinkUrl:location.href,weiXinChatLinkUrl:location.href,weiXinFriendLinkUrl:location.href,sinaPic:"http://p0.jmstatic.com/templates/jumei/images/logo_new_v1.jpg",weiXinChatPic:"http://p0.jmstatic.com/templates/jumei/images/logo_new_v1.jpg",weiXinFriendPic:"http://p0.jmstatic.com/templates/jumei/images/logo_new_v1.jpg",sinaTitle:"精彩购物，尽在聚美优品",weixinChatTitle:"精彩购物，尽在聚美优品",weiXinFriendTitle:"精彩购物，尽在聚美优品",weiXinFriendContent:"中国最大正品化妆品团购网站，千万用户推荐，拆封30天无条件退款！",weiXinChatContent:"中国最大正品化妆品团购网站，千万用户推荐，拆封30天无条件退款！"},$.extend(this.options,i),this.init()};return e.prototype={init:function(){var i=this,t=this.options;this.tpl='<div id="share-module-bg"></div><div id="share-module"><div id="share-module-wrapper"><a id="sina" class="sina" type="sina"><img src="'+t.sinaBtnBg+'"/></a><a id="wechat" class="wechat" type="wechat"><img src="'+t.weichatBtnBg+'"/></a><a id="weixin-friend"  class="weixin-friend" type="weixin-friend"><img src="'+t.weiFriendBtnBg+'"/></a><div style="clear:both;"></div></div><div class="close-share">取   消</div></div>',$("#share-module").length<=0?$("#wrapper").append(i.tpl):alert("默认的id命名“share-module”已经被使用了，快去调整一下之前的id名！"),this.bind(),this.close()},bind:function(){var i=this,t=$("#share-module-wrapper a");t.off("click"),t.on("click",function(){Jumei.ja("share","shareclick",$(this).index());var t=$(this).attr("type"),e={};e.sinaLinkUrl=i.options.sinaLinkUrl,e.sinaTitle=i.options.sinaTitle,e.sinaPic=i.options.sinaPic,e.weiXinChatLinkUrl=i.options.weiXinChatLinkUrl,e.weixinChatTitle=i.options.weixinChatTitle,e.weiXinChatPic=i.options.weiXinChatPic,e.weiXinChatContent=i.options.weiXinChatContent,e.weiXinFriendLinkUrl=i.options.weiXinFriendLinkUrl,e.weiXinFriendPic=i.options.weiXinFriendPic,e.weiXinFriendTitle=i.options.weiXinFriendTitle,e.weiXinFriendContent=i.options.weiXinFriendContent;i._openUrl(t,e),i.close()});var e=$("#share-module .close-share");e.off("click"),e.on("click",function(){i.close()}),$("#share-module-bg").on("click",function(){i.close()})},_openUrl:function(i,t){var e="",n=t,o="http://service.weibo.com/share/share.php?";switch(i){case"sina":e=o+"title="+encodeURIComponent(n.sinaTitle)+"&pic="+encodeURIComponent(n.sinaPic)+"&url="+encodeURIComponent(n.sinaLinkUrl);break;case"wechat":e="jumeimall://action/share/weixin?&link="+encodeURIComponent(n.weiXinChatLinkUrl)+"&img="+encodeURIComponent(n.weiXinChatPic)+"&title="+encodeURIComponent(n.weixinChatTitle)+"&des="+encodeURIComponent(n.weiXinChatContent);break;case"weixin-friend":e="jumeimall://action/share/weixin/pengyouquan?&link="+encodeURIComponent(n.weiXinFriendLinkUrl)+"&img="+encodeURIComponent(n.weiXinFriendPic)+"&title="+encodeURIComponent(n.weiXinFriendTitle)+"&des="+encodeURIComponent(n.weiXinFriendContent)}location.href=e},close:function(){$("#share-module").removeClass("share-show"),$("#share-module").addClass("share-hide"),$("#share-module-bg").hide()},show:function(){$("#share-module").addClass("share-show"),$("#share-module").removeClass("share-hide"),$("#share-module-bg").show()},openUrl:function(i,t){var e=this;return e._openUrl(i,t)}},e}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.countdown=i.Jumei.ui.countdown||n,i.define&&define("countdown",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={selector:"",endTime:"",isShow:!1,isday:!1,callback:function(){}},this.tpl='<span class="count-day"></span><span class="count-hour"></span><span class="count-minute"></span><span class="count-second"></span>',this.overTpl='<span class="count-day"><i class="digit">0</i><i class="digit">0</i></span><span class="count-hour"><i class="digit">0</i><i class="digit">0</i></span><span class="count-minute"><i class="digit">0</i><i class="digit">0</i></span><span class="count-second"><i class="digit">0</i><i class="digit">0</i></span>',$.extend(this.options,i),this.init()};return e.prototype={init:function(){var i=this.options;$(i.selector).html(this.tpl),$(i.selector).addClass("countdown"),this.createTime(),setTimeout(function(){$(".count-day .digit").eq(0).css("width","25px")},1e3)},createTime:function(){function i(i,t,e){var n="",o=0,s=0;i>0?i%10==9?(o=parseInt(i/10),s=parseInt(i%10),n='<i class="digit-wrap"><i class="digit">'+o+'</i><i class="digit">'+(o+1)+'</i></i> <i class="digit-wrap"><i class="digit">'+s+'</i><i class="digit">'+(s+1==10?0:s+1)+"</i></i>"+e,t.html(n),t.find(".digit-wrap").animate({top:"0px"},500,"ease-out")):(o=parseInt(i/10),s=parseInt(i%10),n='<i class="digit">'+o+'</i><i class="digit-wrap"><i class="digit">'+s+'</i><i class="digit">'+(s+1==10?0:s+1)+"</i></i>"+e,t.html(n),t.find(".digit-wrap").animate({top:"0px"},500,"ease-out")):(o=parseInt(i/10),s=parseInt(i%10),n='<i class="digit">'+o+'</i> <i class="digit-wrap"><i class="digit">'+s+'</i><i class="digit">'+(s+1==10?0:s+1)+"</i></i>"+e,t.html(n),t.find(".digit-wrap").animate({top:"0px"},500,"ease-out"))}function t(i,t){var e="",n=0,o=0;i>0?i%10==9?(n=parseInt(i/10),o=parseInt(i%10),e='<i class="digit-wrap"><i class="digit">'+n+'</i><i class="digit">'+(n+1)+'</i></i> <i class="digit-wrap"><i class="digit">'+o+'</i><i class="digit">'+(o+1==10?0:o+1)+"</i></i>"+t,$(".count-second").html(e),$(".count-second .digit-wrap").animate({top:"0px"},500,"ease-out")):(n=parseInt(i/10),o=parseInt(i%10),e='<i class="digit">'+n+'</i><i class="digit-wrap"><i class="digit">'+o+'</i><i class="digit">'+(o+1==10?0:o+1)+"</i></i>"+t,$(".count-second").html(e),$(".count-second .digit-wrap").animate({top:"0px"},500,"ease-out")):(n=parseInt(i/10),o=parseInt(i%10),e='<i class="digit-wrap"><i class="digit">'+n+'</i><i class="digit">'+(n+1)+'</i></i> <i class="digit-wrap"><i class="digit">'+o+'</i><i class="digit">'+(o+1==10?0:o+1)+"</i></i>"+t,$(".count-second").html(e),$(".count-second .digit-wrap").animate({top:"0px"},500,"ease-out"))}function e(){var e=new Date(parseInt(o.endTime))-new Date;return 0>=e?(o.callback(),clearInterval(n.timer),o.isShow&&$(o.selector).html(n.overTpl),!1):(s=e/1e3,a=e/1e3/60,r=e/1e3/60/60,void(n.options.isShow&&(l===parseInt(r/24,10)&&null!==l||(l=parseInt(r/24,10),n.options.isday?i(l,h,"天"):i(l,h)),d===parseInt(r%24,10)&&null!==d||(d=parseInt(r%24,10),n.options.isday?i(d,p,"时"):i(d,p)),c===parseInt(a%60,10)&&null!==c||(c=parseInt(a%60,10),n.options.isday?i(c,m,"分"):i(c,m)),u===parseInt(s%60,10)&&0!==parseInt(s%60,10)&&null!==u||(u=parseInt(s%60,10),n.options.isday?t(u,"秒"):t(u)))))}var n=this,o=this.options,s=0,a=0,r=0,l=null,d=null,c=null,u=null,h=$(o.selector).find(".count-day"),p=$(o.selector).find(".count-hour"),m=$(o.selector).find(".count-minute");n.timer=setInterval(function(){e()},1e3)}},e}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.toast=i.Jumei.ui.toast||n,i.define&&define("toast",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={animateTime:1,animateCurves:"ease",stopTime:2,moveLength:-10,animateEndCallback:function(){}},$.extend(this.options,i),this.init()};return e.prototype={init:function(){var i=this,t=this.options;if(i.transformEndFlag=!0,i.order=0,$("#toast-boxs").length>0)return!1;var e='<span id="toast-boxs" class="toast-boxs" style="transition: -webkit-transform '+t.animateTime+"s "+t.animateCurves+" 0s , opacity "+t.animateTime+"s "+t.animateCurves+" 0s;-webkit-transition: -webkit-transform "+t.animateTime+"s "+t.animateCurves+" 0s , opacity "+t.animateTime+"s "+t.animateCurves+' 0s;opacity:0;visibility: hidden;position:fixed;"></span>';$("body").append(e),i.dom=$("#toast-boxs"),i.dom.on("webkitTransitionEnd",function(t){"opacity"===t.propertyName&&(i.order++,2===i.order&&(i.transformEndFlag=!0,i.dom.css({visibility:"hidden"}),i.order=0,i.animateEndCallback()))})},show:function(t,e,n){var o=this,s=this.options;if(o.transformEndFlag){o.dom.html(t);var a=$(i).height(),r=$(i).width(),l=o.dom.height(),d=o.dom.width();o.centerTop=(a-l)/2,o.centerLeft=(r-d)/2;var c="undefined"!=typeof e?e:s.bottom,u="undefined"!=typeof n?n:s.right;o.dom.css({bottom:("undefined"!=typeof c?c:o.centerTop)+"px",right:("undefined"!=typeof u?u:o.centerLeft)+"px"}),o.dom.css({opacity:1,"z-index":19,visibility:"visible","-webkit-transform":"translate(0,"+s.moveLength+"px)",transform:"translate(0,"+s.moveLength+"px)"}),setTimeout(function(){o.dom.css({opacity:0,"z-index":19,"-webkit-transform":"translate(0,0)",transform:"translate(0,0)"})},1e3*s.stopTime)}o.transformEndFlag=!1},animateEndCallback:function(){var i=this,t=this.options;t.animateEndCallback(i)}},e}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.slider=i.Jumei.ui.slider||n,i.define&&define("slider",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={id:"ui-slider-boxs",index:0,imgInit:2,autoPlay:!1,switchTime:3e3,animateTime:400,dotsClass:"ui-slider-dots",dotsSelectedClass:"ui-dot-select",showDot:!0,slideEnd:null,slideStart:null,direction:"right"},$.extend(this.options,i),this.init()};return e.prototype={init:function(){var i=this,e=this.options;if(!e.id||!t.getElementById(e.id.replace(/^#/,"")))return!1;e.dom=t.getElementById(e.id.replace(/^#/,"")),i.constructor="slider",i.moveFlag=!1,e.dom.className+=" slider";var n,o,s=e.dom.offsetWidth,a=e.dom.children,r=t.createElement("div"),l=r.cloneNode(),d=t.createElement("b"),c=[],u=a.length;if(0===a.length)return!1;for(var h=0;u>h;h++)n=a[0],n.className+=" slider-item",n.style.cssText+="width:"+s+"px;float:left",r.appendChild(n),l.appendChild(d.cloneNode()),o=n.getElementsByTagName("img")[0],h<e.imgInit?o&&!o.src&&o.getAttribute("lazyload")&&(o.src=o.getAttribute("lazyload")):c.push(o);r.setAttribute("class","slide-wrapper clear"),r.style.width=s*u+"px",r.style.cssText+="position:relative;left:-"+e.index*s+"px;",l.className=e.dotsClass,e.showDot||(l.style.display="none"),e.dom.appendChild(r),e.dom.appendChild(l),e.wheel=r,e.items=r.children,e.length=e.items.length,1===e.length&&(l.style.display="none"),e.dots=l.children,e.dots.length>0&&(e.dots[e.index].className=e.dotsSelectedClass),e.width=s,e.lazyImgs=c,i.initEvent(),i.start()},initEvent:function(){var i=this,t=this.options,e=t.wheel;e.addEventListener("touchstart",function(i){t.pageX=i.touches[0].pageX,t.pageY=i.touches[0].pageY,t.S=!1,t.T=!1,t.X=0,t.wheel.style.webkitTransitionDuration="0ms"}),e.addEventListener("touchmove",function(e){var n=t.X=e.touches[0].pageX-t.pageX;if(!t.T){var o=Math.abs(n)<Math.abs(e.touches[0].pageY-t.pageY);o||clearTimeout(t.play),t.T=!0,t.S=o}t.S||(e.stopPropagation(),e.preventDefault(),i.moveFlag=!0,0===i.options.index||i.options.index===i.options.length-1?Math.abs(n)<100&&(t.wheel.style.left=n-t.index*t.width+"px"):t.wheel.style.left=n-t.index*t.width+"px")});var n=function(){t.S||i._slide(t.index+(t.X<=-20?Math.ceil(-t.X/t.width):t.X>20?-Math.ceil(t.X/t.width):0))};e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),e.addEventListener("webkitTransitionEnd",function(){i.moveFlag=!1,t.showDot&&(t.dom.querySelector("."+t.dotsSelectedClass).setAttribute("class",""),t.dots[t.index].className=t.dotsSelectedClass),i._setTimeout(),i.options.slideEnd&&i.options.slideEnd.apply(i)})},_slide:function(i,t,e){var n=this,o=this.options,s=o.length;return i>-1&&s>i?n._move(i,e):i>=s?(n._move(s-(t?2:1),e),o.direction=-1):(n._move(t?1:0,e),o.direction=1),n.options.slideStart&&n.options.slideStart.apply(n),n},_move:function(i,e){var n=this,o=this.options,s=o.index;if(o.lazyImgs.length){var a=o.items[i].getElementsByTagName("img")[0];a&&!a.src&&(a.src=a.getAttribute("lazyload"))}o.index=i,1===e?(o.wheel.style.removeProperty("-webkit-transition"),o.wheel.style.cssText+="position:relative;left:-"+i*o.width+"px;",t.getElementById(o.dotsSelectedClass).id="",o.dots[2].id=o.dotsSelectedClass):-1===i||i===o.length?o.wheel.style.cssText+="-webkit-transition:"+o.animateTime+"ms;position:relative;left:-"+(i*o.width-100)+"px":(o.wheel.style.cssText+="-webkit-transition:"+o.animateTime+"ms;position:relative;left:-"+i*o.width+"px",3===s&&2===e&&o.slideEnd&&o.slideEnd.apply(n))},_setTimeout:function(){var i=this,t=i.options;return t.autoPlay?(clearTimeout(t.play),t.play=setTimeout(function(){i._slide.call(i,t.index+t.direction,!0)},t.switchTime),i):i},_resize:function(){var i=this,e=this.options,n=e.dom.offsetWidth,o=e.items,s=t.createElement("b");e.length=$("#slider .slider-item").length;var a=e.length;if(!n)return i;e.width=n,clearTimeout(e.play);var r=t.querySelector(".ui-slider-dots");r.innerHTML="";for(var l=0;a>l;l++)o[l].style.cssText+="width:"+n+"px;",r.appendChild(s.cloneNode());return e.dots=r.children,e.dots[e.index].id=e.dotsSelectedClass,e.wheel.style.removeProperty("-webkit-transition"),e.wheel.style.cssText+="width:"+n*a+"px;position:relative;left:-"+e.index*n+"px;",e.direction=1,$(".ui-slider-dots").html(),i._setTimeout(),i},start:function(){var i=this;return i.options.direction="left"===i.options.direction?-1:1,i._setTimeout(),i},stop:function(){var i=this;return clearTimeout(i.options.play),i},prev:function(){return this._slide(this.options.index-1,!1)},next:function(){return this._slide(this.options.index+1,!1)},moveTo:function(i){return this._slide(i,!1)}},e}),function(i,t,e){var n=e(i);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.lazyLoad=i.Jumei.ui.lazyLoad||n,i.define&&define("lazyLoad",function(i,t,e){e.exports=n})}(this,document,function(i){"use strict";var t=0,e=$(i),n=[],o={},s=function(i){this.options={container:"body",urlName:"data-url"},o=$.extend(this.options,i),this._init()};return s.prototype={_init:function(){this.reset(),$(document).on("scroll",this._showOriginImg)},reset:function(){n=$(this.options.container),this._showOriginImg()},_showOriginImg:function(){t&&clearTimeout(t),t=setTimeout(function(){var i=e.scrollTop(),t=e.height(),s=i+t,a="img["+o.urlName+"]";n&&n.find(a).each(function(t,e){var n=$(e),a=n.offset().top,r=n.height(),l=a+r;if(l>i&&s>a){var d=n.attr(o.urlName);d&&n.attr("src",d).removeAttr(o.urlName)}})},50)}},s}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.imglazyload=i.Jumei.ui.imglazyload||n,i.define&&define("imglazyload",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(t){this.options={threshold:0,container:i,urlName:"data-url",placeHolder:"",eventName:"scrollStop",innerScroll:!1,isVertical:!0,classSelector:"img",is_ajax:!1},this.pedding=[],$.extend(this.options,t),this.init()};return e.prototype={init:function(){this.initElem(),this.initEvent()},isShow:function(t){var e=$(this.options.container),n=this.options.isVertical,o=$.isWindow(e.get(0)),s={win:[n?"scrollY":"scrollX",n?"innerHeight":"innerWidth"],img:[n?"top":"left",n?"height":"width"]},a=o?i:e.offset(),r=a[s.win[0]],l=a[s.win[1]],d=!0;return d=r>=t[s.img[0]]-this.options.threshold-l&&r<=t[s.img[0]]+t[s.img[1]]},initElem:function(){var i=this.options,t=this;$(i.classSelector).each(function(){var i=$(this).attr(t.options.urlName);i&&i.length>0&&t.pedding.push(this)})},addElem:function(i){var t=this.options,e=this,n=$(i).attr(e.options.urlName);n&&n.length>0&&(e.pedding.push(i),t.placeHolder.length>0&&$(i).attr("src",t.placeHolder))},initEvent:function(){var t=this;$(function(){t.detect(),setTimeout(function(){t.detect()},500)}),$(i).on(this.options.eventName+" ortchange",function(){t.pedding.length<=0&&!t.options.is_ajax?$(i).off(t.options.eventName+" ortchange"):t.detect()})},load:function(i){var t=$(i),e={},n=t,o=this,s=$(i).is("img"),a="";s||($.each(t.get(0).attributes,function(){~this.name.indexOf("data-")&&(e[this.name]=this.value)}),n=$("<img />").attr(e)),t.trigger("startload"),n.on("load",function(){n.css({opacity:1}),!s&&t.replaceWith(n),t.trigger("loadcomplete"),n.off("load")}).on("error",function(){n.off("error")}),a=t.attr(o.options.urlName),a&&""!==a&&n.attr("src",a)},detect:function(){var i,t,e,n,o=this,s=[].splice;for(i=o.pedding.length;i--;)t=$(n=o.pedding[i]),e=t.offset(),$(n).css({opacity:0,"-webkit-transition":"all 350ms ease"}),o.isShow(e)&&(s.call(o.pedding,i,1),o.load(n))}},e}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.refresh=i.Jumei.ui.refresh||n,i.define&&define("refresh",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={callback:function(){},flag:!0},$.extend(this.options,i),this.init()};return e.prototype={init:function(){this.eventInit()},eventInit:function(){var e=this;$(t).on("scroll",function(){e.options.flag&&$(i).scrollTop()>$("body").height()-$(i).height()-10&&(e.options.flag=!1,e.options.callback.call(e))})},changeFlag:function(){var i=this;i.options.flag=!0}},e}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.gotop=i.Jumei.ui.gotop||n,i.define&&define("gotop",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={img:"http://ms0.jmstatic.com/beauty/image/back_top@2x.png",bottom:"20px"},$.extend(this.options,i),this.init()};return e.prototype={init:function(){var i=this;$("#toTop").length<=0&&$("body").append('<div id="toTop" style="background: url('+i.options.img+") left center no-repeat !important;background-size: 44px 44px !important;position: fixed;bottom: "+i.options.bottom+';width: 45px;height: 45px;z-index: 200000;right: 10px;display: none;"></div>'),i.initEvent()},initEvent:function(){var t=$("#toTop"),e=this;t.off("click"),t.on("click",function(){var n=$(i).scrollTop();e.scrollTo(0,n),t.hide()}),$(i).on("scroll",function(){var e=$(i).scrollTop();e>100?t.show():t.hide()})},scrollTo:function(t,e){for(var n=500;n>=0;n-=5)!function(){var o=n;setTimeout(function(){0>=o?i.scrollTo(0,t):i.scrollTo(0,e-o/500*(e-t))},o/3)}()}},e}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.loadding=i.Jumei.ui.loadding||n,i.define&&define("loadding",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={src:"http://images.jumei.com/mobile/act/image/loadding/8.gif",width:20,height:20,scrollFlag:!0},$.extend(this.options,i),this.tpl='<div id="loadding-img" style="display:none;width:50px;height:50px;z-index: 10000;position: absolute;" class="loadding"><img style="width:100%;display:block;" src="<%=src%>"/></div>',this.init()};return e.prototype={init:function(){var i=$.parseTpl(this.tpl,this.options),t=this;$("#loadding-img").length>0?t.showLoadding():($("body").append(i),t.showLoadding())},showLoadding:function(){this.setBg(),this.setFlag()},setBg:function(){var e=this;e.windowHeight=$(i).height(),e.windowWidth=t.documentElement&&t.documentElement.clientWidth||t.body.clientWidth||i.innerWidth},setFlag:function(){var i=this.options,t=$("#loadding-img"),e=0;t.width(i.width),t.height(i.width),this.options.scrollFlag&&(e=this.getScrollTop());var n=(this.windowWidth-t.width())/2,o=(this.windowHeight-t.height())/2+e;t.css({left:n+"px",top:o+"px"})},show:function(){$("#loadding-img").show(),this.showLoadding()},hide:function(){$("#loadding-img").hide()},getScrollTop:function(){var i=0;return t.documentElement&&t.documentElement.scrollTop?i=t.documentElement.scrollTop:t.body&&(i=t.body.scrollTop),i}},e}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.scroll=i.Jumei.ui.scroll||n,i.define&&define("scroll",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(){function i(i){return o===!1?!1:""===o?i:o+i.charAt(0).toUpperCase()+i.substr(1)}var e={},n=t.createElement("div").style,o=function(){for(var i,t=["t","webkitT","MozT","msT","OT"],e=0,o=t.length;o>e;e++)if(i=t[e]+"ransform",i in n)return t[e].substr(0,t[e].length-1);return!1}();return e.getStyleName=i,e}(),n=function(i){var t=function(){};this.options={id:"content",pullDownCallback:t,pullUpCallback:t,startPullDownCallback:t,startPullDownMaxLength:40},$.extend(this.options,i),this.init()};return n.prototype={init:function(){var i=this,e=this.options;if(i.time={},i.pageXY={},i.speed=0,i.direction=null,i.parentHeight=0,!e.id||!t.getElementById(e.id.replace(/^#/,"")))return!1;i.dom=t.getElementById(e.id.replace(/^#/,""));var n=$(this.dom).parent();n.css("overflow","hidden"),$(i.dom).css("transform","translate3d(0px, 0px, 0px)"),$(i.dom).css("-webkit-transform","translate3d(0px, 0px, 0px)"),i.addListener()},addListener:function(){var i=this,t=this.options,e=i.pageXY;i.touchendFlag=!0;var n=$(i.dom);n.on("touchstart",function(t){t.preventDefault(),i.time.startT=(new Date).getTime(),e.startX=t.changedTouches[0].pageX,e.startY=t.changedTouches[0].pageY;var n=i.getTranslateArray();e.currentX=parseInt(n[0]),e.currentY=parseInt(n[1]),i.stopMoveByCss(e.currentY)}),n.on("touchmove",function(o){if(o.preventDefault(),e.endX=o.changedTouches[0].pageX,e.endY=o.changedTouches[0].pageY,e.moveX=e.endX-e.startX,e.movedY=e.endY-e.startY,i.direction=e.movedY>0?"up":"down",e.targetX=e.currentX+e.movedX,e.targetY=e.currentY+e.movedY,e.currentY<="0"&&e.targetY>0&&i.touchendFlag&&(t.startPullDownCallback(),i.touchendFlag=!1),e.currentY<="0"&&e.targetY>t.startPullDownMaxLength)n.css("-webkit-transform","translate3d(0px, 40px, 0px)");else{var s=i.getMaxMove();e.targetY<-(s+t.startPullDownMaxLength)?n.css("-webkit-transform","translate3d(0px, "+-(t.startPullDownMaxLength+s)+"px, 0px)"):n.css("-webkit-transform","translate3d(0px, "+e.targetY+"px, 0px)")}}),n.on("touchend",function(n){var o,s,a;i.touchendFlag=!0;var r=i.getTranslateArray();e.touchEndX=parseInt(r[0]),e.touchEndY=parseInt(r[1]),i.time.endT=(new Date).getTime(),i.time.moveingT=i.time.endT-i.time.startT,e.moveLen=e.touchEndY-e.currentY,i.speed=Math.abs(e.moveLen/i.time.moveingT),o=i.time.moveingT/200,s=500*i.speed,a="down"===i.direction?e.touchEndY-s:e.touchEndY+s;var l=i.getMaxMove();a>=t.startPullDownMaxLength&&(a=t.startPullDownMaxLength),a<-(l+t.startPullDownMaxLength)&&(a=-(l+t.startPullDownMaxLength)),Math.abs(n.changedTouches[0].pageY-e.startY)>20&&i.moveByCss(o,a),i.monitor()})},getTranslateArray:function(){var t,n,o=$(this.dom),s=i.getComputedStyle(o[0],null);return s=s[e.getStyleName("transform")].split(")")[0].split(", "),t=+(s[12]||s[4]),n=+(s[13]||s[5]),{0:t,1:n}},stopMoveByCss:function(i){var t=$(this.dom);t.css({"-webkit-transition":"-webkit-transform 0s ease-out 0s",transition:"-webkit-transform 0s ease-out 0s"}),t.css("-webkit-transform","translate3d(0px, "+i+"px, 0px)")},moveByCss:function(i,t){var e=(this.options,$(this.dom));e.css({"-webkit-transition":"-webkit-transform "+i+"s cubic-bezier(0.333333,0.666667,0.66667,1) 0s",transition:"-webkit-transform "+i+"s cubic-bezier(0.333333,0.666667,0.66667,1) 0s"}),e.css("-webkit-transform","translate3d(0px, "+t+"px, 0px)")},offset:function(i){for(var t=0,e=0,n=i;n.offsetParent;)t+=n.offsetLeft,e+=n.offsetTop,n=n.offsetParent;return{left:t,top:e}},getMaxMove:function(){var i=this.options,t=$("#"+i.id).height(),e=t-$(this.dom).parent().height();return 0>e&&(e=0),e},monitor:function(){var i,t=this,e=this.options,n=$(this.dom),o=t.getMaxMove(),s=setInterval(function(){var a=t.getTranslateArray(),r=parseInt(a[1]);r>0&&(t.stopMoveByCss(r),t.moveByCss("0.5",0),i=function(){e.pullDownCallback(),n.off("webkitTransitionEnd")},n.on("webkitTransitionEnd",i),clearInterval(s)),-o>r&&(t.stopMoveByCss(r),t.moveByCss("0.5",-o),i=function(){e.pullUpCallback(),n.off("webkitTransitionEnd")},n.on("webkitTransitionEnd",i),clearInterval(s))},100)}},n}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.bottomBox=i.Jumei.ui.bottomBox||n,i.define&&define("bottomBox",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={id:"",content:"",callback:function(){}},$.extend(this.options,i),this.tpl='<div class="ui-bottom-box '+this.options.id+'" id="'+this.options.id+'"><div class="ui-bottom-title clear"><a class="ui-bottom-cancel pull_left">取消</a><a class="ui-bottom-sure">确定</a></div><div class="ui-bottom-content">'+this.options.content+"</div></div>",this.bg='<div class="ui-bg"></div>',this.init()};return e.prototype={init:function(){var i=this.options,t=$("body");$(i.id).length<=0&&t.append(this.tpl),$(".ui-bg").length<=0&&t.append(this.bg),this.initEvent()},initEvent:function(){var i=this,t=i.options,e=$("#"+t.id),n=e.find(".ui-bottom-sure"),o=e.find(".ui-bottom-cancel");o.on("tap",function(){e.hide(),$(".ui-bg").hide()}),n.on("tap",function(){e.hide(),$(".ui-bg").hide(),t.callback.call(i)}),$(".ui-bottom-box,.ui-bottom-title,.ui-bottom-content,.ui-bg").on("touchmove",function(i){i.stopPropagation(),i.preventDefault()}),$(".ui-bg").on("tap",function(i){i.stopPropagation(),i.preventDefault(),e.hide(),$(".ui-bg").hide()})},show:function(){$("#"+this.options.id).show(),$(".ui-bg").show(300)}},e}),function(i,t,e){var n=e(i,t);i.Jumei=i.Jumei||{},i.Jumei.ui=i.Jumei.ui||{},i.Jumei.ui.dialog=i.Jumei.ui.dialog||n,i.define&&define("dialog",function(i,t,e){return n})}(this,document,function(i,t){"use strict";var e=function(i){this.options={id:"",content:"聚美提示您！",title:"提示",type:"default",btn:2,ok:"确定",cancel:"取消",init:function(){},okCallback:null,cancelCallback:function(){}},$.extend(this.options,i),this.tpl='<div class="ui-dialog <%=id%>" id="<%=id%>"><div class="ui-dialog-title"><div><%=title%></div><div class="ui-dialog-close"></div></div><div class="ui-dialog-content"><%=content%></div><% if(btn == 2){  %><div class="ui-dialog-btn"><div class="ui-dialog-cancel"><%=cancel%></div><div class="ui-dialog-ok"><%=ok%></div></div><% }else if(btn == 1){ %><div class="ui-dialog-btn"><div class="ui-dialog-ok" style="border-left: none;width: 100%;" ><%=ok%></div></div><% } %></div>',this.bg='<div class="ui-bg"></div>',this.init()};return e.prototype={init:function(){this.appendHtml(),this.initFunc(),this.bindEvent(),this.resize()},appendHtml:function(){var i=this,t=$(".ui-bg"),e=$("body"),n=$.parseTpl(this.tpl,this.options);this.dialog=$(n),e.append(i.dialog),t.length<=0&&e.append(i.bg)},initFunc:function(){this.options.init()},show:function(){var t=$("body").height(),e=$(i).height(),n=t>e?t:e;$(".ui-bg").css({position:"fixed",height:n+"px"}),this.culculate(),this.setFlag(),this.animateShow()},animateShow:function(){var i=$(".ui-bg"),t=this.options.type;switch(i.show(),i.animate({opacity:.5},500,"ease-out"),t){case"slidedown":this.dialog.show(),this.dialog.css({transform:"translate3d(0,-300px,0)","-webkit-transform":"translate3d(0,-300px,0)"}),this.dialog.animate({transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)",opacity:1},300,"ease");break;case"rotate":this.dialog.show(),this.dialog.wrap('<div class="ui-dialog-wrap"></div>'),this.dialog.css({transform:"rotateY(-390deg)","-webkit-transform":"rotateY(-390deg)"}),this.dialog.animate({transform:"rotateY(0deg)","-webkit-transform":"rotateY(0deg)"},500,"ease");break;case"scale":this.dialog.show(),this.dialog.css({transform:"scale(0)","-webkit-transform":"scale(0)"}),this.dialog.animate({transform:"scale(1)","-webkit-transform":"scale(1)"},200,"ease",function(){});break;case"fadein":this.dialog.show(),this.dialog.css("opacity",0),this.dialog.animate({opacity:1},400,"ease",function(){});break;default:this.dialog.show(),i.show(),i.animate({opacity:.5},500,"ease")}},bindEvent:function(){var i=this,e=$(".ui-dialog-btn .ui-dialog-cancel,.ui-dialog .ui-dialog-close"),n=$(".ui-dialog .ui-dialog-ok");""!==i.options.id&&(e=$("#"+i.options.id).find(".ui-dialog-cancel,.ui-dialog-close"),n=$("#"+i.options.id).find(".ui-dialog-ok")),e&&e.tap(function(t){return t.stopPropagation(),t.preventDefault(),i.hide(),i.options.cancelCallback(),!1}),n&&n.tap(function(t){t.stopPropagation(),t.preventDefault();var e=!0;return"function"==typeof i.options.okCallback&&(e=i.options.okCallback()),e!==!1&&i.hide(),!0}),$(t).on("touchmove",".ui-dialog,.ui-bg",function(i){i.preventDefault()})},resize:function(){},culculate:function(){var t=this;t.windowHeight=$(i).height(),t.windowWidth=$(i).width(),t.dialog.show(),t.height=t.dialog.height(),t.width=t.dialog.width(),t.dialog.hide()},setFlag:function(){var t=0,e=0,n=0;t=$(i).scrollTop(),n=(this.windowWidth-this.width)/2,e=(this.windowHeight-this.height)/2+t,this.dialog.css({left:n+"px",top:e+"px"})},hide:function(){$(".ui-bg").hide(),this.dialog.hide().css({left:"0px"})}},e}),define("ui",["dialog","bottomBox","scroll","loadding","gotop","refresh","imglazyload","lazyLoad","slider","toast","countdown","share","weixinshare","upload"],function(i){
var t={};return t.dialog=i("dialog"),t.bottomBox=i("bottomBox"),t.scroll=i("scroll"),t.loadding=i("loadding"),t.gotop=i("gotop"),t.refresh=i("refresh"),t.imglazyload=i("imglazyload"),t.lazyLoad=i("lazyLoad"),t.slider=i("slider"),t.toast=i("toast"),t.countdown=i("countdown"),t.share=i("share"),t.weixinshare=i("weixinshare"),t.upload=i("upload"),t});